<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/static/output.png" type="image/png">
    <title>灵巧手控制界面</title>
    <link rel="stylesheet" href="./static/style.css">
    <style>
        body {
            background-color: #f5f5f5;
        }

        h2 {
            font-weight: bold;
        }

        .video-box {
            background-color: #000;
            width: 100%;
            height: 360px;
            object-fit: cover;
            border-radius: 10px;
            border: 2px solid #ccc;
        }

        .slider-container {
            background: white;
            border-radius: 10px;
            padding: 10px 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            font-weight: 500;
        }

        input[type="range"] {
            width: 100%;
        }

        .control-buttons button {
            margin: 5px;
            min-width: 120px;
        }
    </style>
</head>

<body class="container py-4">
    <h2 class="mb-4 text-center">灵巧手控制界面</h2>

    <!-- 摄像头视频 -->
    <div class="row mb-4">
        <!-- 左侧：摄像头视频 -->
        <div class="col-md-6">
            <img id="video-feed" class="video-box" src="/video_feed" alt="摄像头画面">
        </div>
    
        <!-- 右侧：Three.js 画布 -->
        <div class="col-md-6" id="three-container-wrapper">
            <!-- Three.js 画布会动态插入 -->
        </div>
    </div>
    <div class="row">
        <!-- 滑块控制区 -->
        <div class="col-md-6">
            <div id="sliders">
                {% for i in range(1, 7) %}
                <div class="slider-container">
                    <div class="slider-label">
                        <span>自由度 {{i}}</span>
                        <span id="val{{i}}">{{0 if i != 6 else 100}}</span>
                    </div>
                    <input type="range" id="dof{{i}}" min="0" max="2000" value="{{0 if i != 6 else 100}}">
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- 按钮控制区 -->
        <div class="col-md-6">
            <div class="slider-container">
                <h5>控制功能</h5>
                <div class="control-buttons">
                    <button class="btn btn-primary" onclick="sendCommand('reset')">复位</button>
                    <button class="btn btn-warning" onclick="sendCommand('clear_fault')">清除故障</button>
                    <button id="graspBtn" class="btn btn-success">开始抓取</button>
                </div>
            </div>

            <div class="slider-container mt-3">
                <h5>状态信息</h5>
                <table class="table table-bordered table-sm text-center">
                    <thead class="table-light">
                        <tr>
                            <th>DOF</th>
                            <th>温度 (℃)</th>
                            <th>位置</th>
                            <th>故障码</th>
                        </tr>
                    </thead>
                    <tbody id="status-table">
                        <!-- JS 动态填充 -->
                    </tbody>
                </table>
            </div>
            <div class="slider-container mt-3">
                <h5>三维力传感器</h5>
                <table class="table table-bordered table-sm text-center">
                    <thead class="table-light">
                        <tr>
                            <th>传感器</th>
                            <th>Fx (N)</th>
                            <th>Fy (N)</th>
                            <th>Fz (N)</th>
                            <th>错误码</th>
                        </tr>
                    </thead>
                    <tbody id="force-table"></tbody>
                </table>
            </div>



        </div>
    </div>


</body>
<script type="module" src="static/3d_model.js"></script>
<script src="static/hand.js"></script>
<script src="static/camera.js"></script>

</html>